

<head>
  <meta charset="UTF-8">
  <title>Lista Cocktail</title>
  <style>
    /* Stili di base per l’esempio */
    .card { border: 1px solid #ccc; padding: 1rem; margin: .5rem; width: 200px; }
    img { max-width: 100%; display: block; margin-bottom: .5rem; }
  </style>
</head>
<body>
  <div id="cocktail-list"></div>

  <script>
    // 1. Fetch del file JSON
    fetch('/data/data.json')
      .then(res => res.json())
      .then(db => {
        // 2. Costruisco la mappa id → nome
        const ingredientiMap = new Map(
          db.ingredienti.map(ing => [ing.id, ing.nome])
        );

        // 3. Render dei cocktail
        const container = document.getElementById('cocktail-list');
        db.cocktails.forEach(c => {
          const card = document.createElement('div');
          card.className = 'card';

          // Titolo e immagine
          card.innerHTML = `
            <h3>${c.nome}</h3>
            <img src="${c.immagine.url}" alt="${c.immagine.alt}">
          `;

          // Lista degli ingredienti con nome
          const ul = document.createElement('ul');
          c.ingredienti.forEach(item => {
            const nomeIng = ingredientiMap.get(item.ingredienteId) || 'Ingrediente sconosciuto';
            const li = document.createElement('li');
            li.textContent = `${item.quantita} ${nomeIng}`;
            ul.appendChild(li);
          });
          card.appendChild(ul);

          // Istruzioni
          const p = document.createElement('p');
          p.textContent = c.istruzioni;
          card.appendChild(p);

          container.appendChild(card);
        });
      })
      .catch(err => console.error('Errore caricamento JSON:', err));
  </script>
</body>
</html>
